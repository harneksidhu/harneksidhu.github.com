<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Managing your Digital Ocean Droplets using Ansible | Harnek</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="The ProblemThere are a series of steps required before you can deploy an applicatoin to the cloud. You must first pick an operating system and start up a server using your cloud provider’s interface.">
<meta property="og:type" content="article">
<meta property="og:title" content="Managing your Digital Ocean Droplets using Ansible">
<meta property="og:url" content="http://harneksidhu.com/2016/07/31/ansible-digital-ocean/index.html">
<meta property="og:site_name" content="Harnek">
<meta property="og:description" content="The ProblemThere are a series of steps required before you can deploy an applicatoin to the cloud. You must first pick an operating system and start up a server using your cloud provider’s interface.">
<meta property="og:image" content="http://harneksidhu.com/2016/07/31/ansible-digital-ocean/project-structure.png">
<meta property="og:updated_time" content="2016-07-31T21:57:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Managing your Digital Ocean Droplets using Ansible">
<meta name="twitter:description" content="The ProblemThere are a series of steps required before you can deploy an applicatoin to the cloud. You must first pick an operating system and start up a server using your cloud provider’s interface.">
<meta name="twitter:image" content="http://harneksidhu.com/2016/07/31/ansible-digital-ocean/project-structure.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<div class="header-left-section">
		<h1 class="blog-title">
			<a href="/">Harnek</a>
		</h1>
		<div class="social-links">
			<a href="https://github.com/harneksidhu" id="nav-github-link" class="nav-icon" title="Github Profile"></a>
			<a href="https://ca.linkedin.com/in/harneksidhu" id="nav-linkedin-link" class="nav-icon" title="LinkedIn Profile"></a>
		</div>
	</div>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://harneksidhu.com"></form>
	</div>
</header>
    <div id="main">
      <article id="post-ansible-digital-ocean" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2016/07/31/ansible-digital-ocean/" class="article-date">
  <time datetime="2016-07-31T21:30:50.000Z" itemprop="datePublished">2016-07-31</time>
</a>
		</span>
		<span class="meta-elements author">John Doe</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      Managing your Digital Ocean Droplets using Ansible
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>There are a series of steps required before you can deploy an applicatoin to the cloud. You must first pick an operating system and start up a server using your cloud provider’s interface. Then you must ssh into the machine and install all the typical libraries, dependencies, and packages that your application server needs. This process seems to work great for small pet projects, but imagine what happens if you need to restart your server from scratch? You would have to re-do everything manually which takes time and of course effort. A shell script might be helpful in automating some common tasks:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install nginx</span><br><span class="line">apt-get install pip</span><br><span class="line">pip-install django</span><br><span class="line">apt-get install postgresql</span><br></pre></td></tr></table></figure>
<p>But you would still need to figure out how to copy over application configuration files or check the status of background services. You would still need to manually login to your cloud provder’s user interface to spin up a virtual machine. You would still need to ssh into the machine and manually copy over your script file to run. This is manual/tedious work and it becomes much more difficult when you have to manage a large number of servers on your own.</p>
<h2 id="Ansible-automate-everything"><a href="#Ansible-automate-everything" class="headerlink" title="Ansible - automate everything"></a>Ansible - automate everything</h2><p><a href="https://www.ansible.com/" target="_blank" rel="external">Ansible</a> is a configuration management software that helps you automate your IT infrastructure. It basically works by reading a yml file of instructions that describes exactly what actions you want to perform on a remote machine. It uses SSH to automatically connect to a machine and then performs the actions defined in your yml file. Since it connects to the cloud machine on its own, you should never access the remote terminal when initially setting up your server. </p>
<p>There are a lot of concepts about Ansible that this blog post is not going to cover. The best way to see the value of Ansible is with a live example.</p>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><h6 id="Sample-Project"><a href="#Sample-Project" class="headerlink" title="Sample Project"></a>Sample Project</h6><p>A <a href="https://github.com/harneksidhu/blog-examples/tree/master/ansible-digital-ocean" target="_blank" rel="external">sample project</a> with an Ansible infrastructure is provided for your convenience. This should be cloned onto your machine. The project utilizes a virtual machine to encapsulate Ansible as well as any required modules that it needs in order to operate. The virtual machine acts as the control machine from which all ansible commands will be performed. We could have avoided the virtual machine all together and just installed Ansible on your host operating system, but I found that having a consistent environment is beneficial especially if you want to be able to work on a variety of different operating systems.</p>
<h6 id="VirtualBox-Vagrant"><a href="#VirtualBox-Vagrant" class="headerlink" title="VirtualBox/Vagrant"></a>VirtualBox/Vagrant</h6><p>You will need to do is install <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">Virtualbox</a> and <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">Vagrant</a>. Virtualbox provides you with the ability to run a virtual machine on your host operating system. You can think of Vagrant as a utility software that wraps around VirtualBox and provides you with the ability to provision a virtual machine in an automated way. Click <a href="https://www.vagrantup.com/docs/provisioning/" target="_blank" rel="external">here</a> if you would like to learn more about how this works and the benefits of provisioning development environments.</p>
<h6 id="DigitalOcean"><a href="#DigitalOcean" class="headerlink" title="DigitalOcean"></a>DigitalOcean</h6><p>Create an account DigitalOcean if you have not already. If you would like to have a $10 credit, you can use my referall link <a href="https://m.do.co/c/385c5ec4be11" target="_blank" rel="external">here</a>. After creating your account, you will need to generate an <a href="https://www.digitalocean.com/community/tutorials/how-to-use-the-digitalocean-api-v2" target="_blank" rel="external">API token</a> that Ansible can use in order to send requests to your account.</p>
<h6 id="Create-public-private-ssh-keys"><a href="#Create-public-private-ssh-keys" class="headerlink" title="Create public/private ssh keys"></a>Create public/private ssh keys</h6><p>The sample project requires a public/private ssh key pair. You could use <code>ssh-keygen</code> or any alternative software you feel comfortable with.</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>The sample project<br><img src="/2016/07/31/ansible-digital-ocean/project-structure.png" alt="This is an example image" title="This is an example image"></p>
<h2 id="S"><a href="#S" class="headerlink" title="S"></a>S</h2><h2 id="yo"><a href="#yo" class="headerlink" title="yo"></a>yo</h2><p>This is an introductory post aimed at helping beginner</p>
<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br><span class="line">apt-get install</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
    
  
</article>




    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:harneksidhu.com">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">Harnek</a>
	</h1>
	<span class="copyright">
		&copy; 2016 John Doe<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>